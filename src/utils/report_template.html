<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ company_research_data.name }} Company Research Report</title>
    <style>
        @page {
            size: A4;
            margin: 15mm 12mm 20mm 12mm;
            @bottom-center {
                content: "Generated by: Ambitus Intelligence";
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                font-size: 9px;
                color: #666;
            }
        }

        @page:first {
            margin: 0;
            @bottom-center {
                content: none;
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.4;
            color: #333;
            font-size: 12px;
        }

        .page {
            width: 210mm;
            min-height: 297mm;
            page-break-after: always;
            background: white;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .page:last-child {
            page-break-after: avoid;
        }

        .content-page {
            padding: 15mm 12mm 25mm 12mm;
            height: calc(297mm - 35mm);
            overflow: hidden;
        }

        /* Cover Page Styles */
        .cover-page {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40mm 20mm;
            height: 297mm;
        }

        .cover-page h1 {
            font-size: 42px;
            font-weight: 700;
            margin-bottom: 18px;
            letter-spacing: -1px;
        }

        .cover-page .subtitle {
            font-size: 22px;
            font-weight: 300;
            margin-bottom: 35px;
            opacity: 0.9;
        }

        .cover-page .category {
            font-size: 14px;
            font-weight: 500;
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 25px;
            margin-bottom: 50px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .cover-page .company-overview {
            font-size: 16px;
            font-weight: 400;
            max-width: 500px;
            line-height: 1.5;
            opacity: 0.95;
        }

        /* Header Styles */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3b82f6;
        }

        .header h1 {
            font-size: 20px;
            font-weight: 700;
            color: #1e3a8a;
        }

        .header .page-number {
            font-size: 12px;
            color: #666;
            font-weight: 500;
        }

        /* Section Styles */
        .section {
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 6px;
        }

        .section-subtitle {
            font-size: 12px;
            color: #666;
            margin-bottom: 18px;
            font-weight: 400;
        }

        /* Accent Box Styles - Optimized for A4 */
        .accent-boxes {
            display: grid;
            gap: 12px;
            margin-bottom: 20px;
        }

        /* Page-specific grid layouts */
        .company-info-grid {
            grid-template-columns: 1fr 1fr;
            grid-template-rows: auto auto;
        }

        .domain-analysis-grid {
            grid-template-columns: 1fr;
            grid-template-rows: auto auto;
            max-width: 400px;
        }

        .market-analysis-grid {
            grid-template-columns: 1fr 1fr;
            grid-template-rows: auto;
        }

        .accent-box {
            background: #f8fafc;
            border: 1.5px solid #e2e8f0;
            border-radius: 8px;
            padding: 12px;
            position: relative;
            min-height: 70px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .accent-box-label {
            font-size: 9px;
            font-weight: 600;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
            line-height: 1.2;
        }

        .accent-box-value {
            font-size: 14px;
            font-weight: 700;
            color: #1e293b;
            line-height: 1.2;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        /* Specific sizing for different content types */
        .large-number {
            font-size: 18px;
            font-weight: 800;
            color: #1e40af;
        }

        .domain-score .accent-box {
            min-height: 85px;
            padding: 15px;
        }

        .domain-score .accent-box-value {
            font-size: 20px;
        }

        /* Products List */
        .products-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .product-item {
            background: #f1f5f9;
            padding: 10px;
            border-radius: 6px;
            border-left: 3px solid #3b82f6;
            font-weight: 500;
            font-size: 11px;
        }

        /* Company Description */
        .company-description {
            font-size: 13px;
            line-height: 1.5;
            color: #374151;
            margin-bottom: 20px;
            padding: 15px;
            background: #f9fafb;
            border-radius: 8px;
            border-left: 4px solid #3b82f6;
        }

        /* Growth Drivers */
        .growth-drivers {
            margin-top: 20px;
        }

        .driver-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 8px;
            padding: 8px;
            background: #f8fafc;
            border-radius: 6px;
            border-left: 2px solid #10b981;
        }

        .driver-bullet {
            width: 6px;
            height: 6px;
            background: #10b981;
            border-radius: 50%;
            margin-right: 10px;
            margin-top: 4px;
            flex-shrink: 0;
        }

        .driver-text {
            font-weight: 500;
            color: #374151;
            font-size: 11px;
            line-height: 1.4;
        }

        /* Competitors */
        .competitors-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .competitor-card {
            background: #f8fafc;
            border: 1.5px solid #e2e8f0;
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .competitor-name {
            font-size: 14px;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 6px;
        }

        .competitor-share {
            font-size: 16px;
            font-weight: 700;
            color: #059669;
            margin-bottom: 4px;
        }

        .competitor-desc {
            font-size: 10px;
            color: #64748b;
            margin-bottom: 6px;
            font-weight: 500;
        }

        .competitor-detail {
            font-size: 10px;
            color: #6b7280;
            line-height: 1.3;
            margin-bottom: 8px;
        }

        /* Gap Analysis */
        .gaps-list {
            margin-top: 20px;
        }

        .gap-item {
            background: #fef7f0;
            border-left: 3px solid #f59e0b;
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 12px;
        }

        .gap-title {
            font-size: 13px;
            font-weight: 700;
            color: #92400e;
            margin-bottom: 4px;
        }

        .gap-impact {
            display: inline-block;
            background: #fbbf24;
            color: white;
            font-size: 8px;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 10px;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .gap-impact.high {
            background: #ef4444;
        }

        .gap-description {
            font-size: 11px;
            color: #451a03;
            line-height: 1.4;
        }

        /* Strategic Opportunities */
        .opportunities-list {
            margin-top: 20px;
        }

        .opportunity-item {
            background: #f0fdf4;
            border-left: 3px solid #22c55e;
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 12px;
        }

        .opportunity-title {
            font-size: 13px;
            font-weight: 700;
            color: #166534;
            margin-bottom: 4px;
        }

        .opportunity-priority {
            display: inline-block;
            background: #22c55e;
            color: white;
            font-size: 8px;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 10px;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .opportunity-priority.medium {
            background: #f59e0b;
        }

        .opportunity-description {
            font-size: 11px;
            color: #14532d;
            line-height: 1.4;
        }

        /* Source Citations */
        .source {
            font-size: 9px;
            color: #6b7280;
            font-style: italic;
            margin-top: 10px;
            padding: 6px 8px;
            background: #f9fafb;
            border-radius: 4px;
            border-left: 2px solid #d1d5db;
            line-height: 1.3;
        }

        /* Domain Analysis Specific */
        .domain-category {
            font-size: 16px;
            color: #1e3a8a;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .analysis-rationale {
            margin-top: 20px;
        }

        .analysis-rationale h4 {
            font-size: 14px;
            color: #1e3a8a;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .analysis-rationale p {
            font-size: 12px;
            line-height: 1.5;
            color: #374151;
        }

        /* Print Optimization */
        @media print {
            body {
                -webkit-print-color-adjust: exact;
                color-adjust: exact;
            }
            
            .page {
                margin: 0;
                border: none;
                page-break-inside: avoid;
            }

            .content-page {
                height: auto;
                max-height: calc(297mm - 35mm);
            }
        }
    </style>
</head>
<body>
    <!-- Cover Page -->
    <div class="page cover-page">
        <div class="category">{{ company_research_data.industry }}</div>
        <h1>{{ company_research_data.name }}</h1>
        <div class="subtitle">Company Research Report</div>
        <div class="company-overview">
            {{ company_research_data.description }}
        </div>
    </div>

    <!-- Page 1: Company Information -->
    <div class="page">
        <div class="content-page">
            <div class="header">
                <h1>{{ company_research_data.name }} · Company Overview</h1>
                <div class="page-number">Page 1</div>
            </div>

            <div class="section">
                <div class="section-title">Company Information</div>
                <div class="section-subtitle">Key company details and business fundamentals</div>
                
                <div class="accent-boxes company-info-grid">
                    <div class="accent-box">
                        <div class="accent-box-label">Company Name</div>
                        <div class="accent-box-value">{{ company_research_data.name }}</div>
                    </div>
                    
                    <div class="accent-box">
                        <div class="accent-box-label">Industry</div>
                        <div class="accent-box-value">{{ company_research_data.industry }}</div>
                    </div>
                    
                    <div class="accent-box">
                        <div class="accent-box-label">Headquarters</div>
                        <div class="accent-box-value">{{ company_research_data.headquarters }}</div>
                    </div>
                    
                    <div class="accent-box">
                        <div class="accent-box-label">Business Model</div>
                        <div class="accent-box-value">B2C Quick Commerce</div>
                    </div>
                </div>

                <div class="section-title">Company Description</div>
                <div class="company-description">
                    {{ company_research_data.description }}
                </div>

                <div class="section-title">Products & Services</div>
                <div class="products-list">
                    {% for product in company_research_data.products %}
                    <div class="product-item">{{ product }}</div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    <!-- Page 2: Domain Analysis -->
    <div class="page">
        <div class="content-page">
            <div class="header">
                <h1>{{ company_research_data.name }} · Domain Analysis</h1>
                <div class="page-number">Page 2</div>
            </div>

            <div class="section">
                <div class="section-title">Domain Analysis</div>
                <div class="section-subtitle">Technology and domain positioning assessment</div>
                
                {% for domain in domain_research_data %}
                <div class="domain-category">{{ domain.domain }}</div>
                
                <div class="accent-boxes domain-analysis-grid domain-score">
                    <div class="accent-box">
                        <div class="accent-box-label">Domain Score</div>
                        <div class="accent-box-value large-number">{{ "%.0f"|format(domain.score * 100) }}%</div>
                    </div>
                    
                    <div class="accent-box">
                        <div class="accent-box-label">Classification</div>
                        <div class="accent-box-value">{{ domain.domain }}</div>
                    </div>
                </div>

                <div class="analysis-rationale">
                    <h4>Analysis Rationale</h4>
                    <p>{{ domain.rationale }}</p>
                </div>

                {% for source in domain.sources %}
                <div class="source">
                    <strong>Source:</strong> <a href="{{ source.url }}">{{ source.title }}</a><br>
                    {{ source.snippet }}
                </div>
                {% endfor %}
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- Page 3: Market Analysis -->
    <div class="page">
        <div class="content-page">
            <div class="header">
                <h1>{{ company_research_data.name }} · Market Analysis</h1>
                <div class="page-number">Page 3</div>
            </div>

            <div class="section">
                <div class="section-title">Market Analysis</div>
                <div class="section-subtitle">Market size, growth, and key drivers</div>
                
                <div class="domain-category">Market Metrics</div>
                
                <div class="accent-boxes market-analysis-grid">
                    <div class="accent-box">
                        <div class="accent-box-label">Market Size (USD)</div>
                        <div class="accent-box-value large-number">${{ "{:,.0f}".format(market_research_data.market_size_usd / 1000000) }}M</div>
                    </div>
                    
                    <div class="accent-box">
                        <div class="accent-box-label">CAGR</div>
                        <div class="accent-box-value large-number">{{ "%.0f"|format(market_research_data.CAGR * 100) }}%</div>
                    </div>
                </div>

                <div class="growth-drivers">
                    <h4 style="font-size: 14px; color: #1e3a8a; margin-bottom: 12px; font-weight: 600;">Key Growth Drivers</h4>
                    
                    {% for driver in market_research_data.key_drivers %}
                    <div class="driver-item">
                        <div class="driver-bullet"></div>
                        <div class="driver-text">{{ driver }}</div>
                    </div>
                    {% endfor %}
                </div>

                {% for source in market_research_data.sources %}
                <div class="source">
                    <strong>Source:</strong> <a href="{{ source.url }}">{{ source.title }}</a><br>
                    {{ source.snippet }}
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- Page 4: Competitive Landscape -->
    <div class="page">
        <div class="content-page">
            <div class="header">
                <h1>{{ company_research_data.name }} · Competitive Landscape</h1>
                <div class="page-number">Page 4</div>
            </div>

            <div class="section">
                <div class="section-title">Competitive Landscape</div>
                <div class="section-subtitle">Key competitors and market positioning</div>
                
                <div class="domain-category">Major Competitors</div>
                
                <div class="competitors-grid">
                    {% for competitor in competitive_research_data %}
                    <div class="competitor-card">
                        <div class="competitor-name">{{ competitor.competitor }}</div>
                        <div class="competitor-share">{{ "%.0f"|format(competitor.market_share * 100) }}% Market Share</div>
                        <div class="competitor-desc">{{ competitor.product }}</div>
                        <div class="competitor-detail">{{ competitor.note }}</div>
                        <div class="source">{{ competitor.source }}</div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    <!-- Page 5: Gap Analysis -->
    <div class="page">
        <div class="content-page">
            <div class="header">
                <h1>{{ company_research_data.name }} · Gap Analysis</h1>
                <div class="page-number">Page 5</div>
            </div>

            <div class="section">
                <div class="section-title">Gap Analysis</div>
                <div class="section-subtitle">Identified gaps and improvement areas</div>
                
                <div class="domain-category">Critical Gaps</div>
                
                <div class="gaps-list">
                    {% for gap in gap_analysis_data %}
                    <div class="gap-item">
                        <div class="gap-title">{{ gap.gap }}</div>
                        <div class="gap-impact {% if gap.impact.lower() == 'high' %}high{% endif %}">{{ gap.impact }} Impact</div>
                        <div class="gap-description">{{ gap.evidence }}</div>
                        <div class="source">{{ gap.source }}</div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    <!-- Page 6: Strategic Opportunities -->
    <div class="page">
        <div class="content-page">
            <div class="header">
                <h1>{{ company_research_data.name }} · Strategic Opportunities</h1>
                <div class="page-number">Page 6</div>
            </div>

            <div class="section">
                <div class="section-title">Strategic Opportunities</div>
                <div class="section-subtitle">Recommended growth and improvement initiatives</div>
                
                <div class="domain-category">Key Opportunities</div>
                
                <div class="opportunities-list">
                    {% for opportunity in opportunity_research_data %}
                    <div class="opportunity-item">
                        <div class="opportunity-title">{{ opportunity.title }}</div>
                        <div class="opportunity-priority {% if opportunity.priority.lower() == 'medium' %}medium{% endif %}">{{ opportunity.priority }} Priority</div>
                        <div class="opportunity-description">{{ opportunity.description }}</div>
                        {% for source in opportunity.sources %}
                        <div class="source">
                            <strong>Source:</strong> <a href="{{ source.url }}">{{ source.title }}</a><br>
                            {{ source.snippet }}
                        </div>
                        {% endfor %}
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</body>
</html>